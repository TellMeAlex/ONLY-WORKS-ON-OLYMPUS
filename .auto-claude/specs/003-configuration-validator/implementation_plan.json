{
  "feature": "Configuration Validator",
  "description": "Schema-based validation tool that checks configuration files for errors, circular dependencies, invalid agent references, and other common mistakes. Provides clear, actionable error messages.",
  "workflow_type": "feature",
  "workflow_rationale": "This is a new feature being added to an existing single-service plugin. It requires adding a new validation module, CLI command, and integration with the existing config loading system. All changes are within the same service (olimpus), so we can implement this as a single-service feature workflow.",
  "phases": [
    {
      "id": "phase-1-validator-core",
      "name": "Validator Core Module",
      "type": "implementation",
      "description": "Create the core validator module with validation types, error reporting, and semantic validation logic",
      "depends_on": [],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "description": "Create validation result types and error/warning interfaces",
          "service": "olimpus",
          "files_to_create": [
            "src/config/validator.ts"
          ],
          "patterns_from": [
            "src/config/schema.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun --eval 'import(\"./src/config/validator.ts\").then(() => console.log(\"OK\").catch(() => console.log(\"FAIL\"))'",
            "expected": "OK"
          },
          "status": "completed"
        },
        {
          "id": "subtask-1-2",
          "description": "Implement circular dependency detection using existing MetaAgentRegistry",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/validator.ts"
          ],
          "patterns_from": [
            "src/agents/registry.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun test --test-filter 'circular dependency'",
            "expected": "Tests pass"
          },
          "status": "completed"
        },
        {
          "id": "subtask-1-3",
          "description": "Implement agent reference validation against BUILTIN_AGENT_NAMES",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/validator.ts"
          ],
          "patterns_from": [
            "src/config/schema.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun test --test-filter 'agent reference'",
            "expected": "Tests pass"
          },
          "status": "completed"
        },
        {
          "id": "subtask-1-4",
          "description": "Implement regex pattern analysis for performance warnings",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/validator.ts"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "bun test --test-filter 'regex performance'",
            "expected": "Tests pass"
          },
          "status": "completed"
        },
        {
          "id": "subtask-1-5",
          "description": "Implement main validateOlimpusConfig function that orchestrates all checks",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/validator.ts"
          ],
          "patterns_from": [
            "src/config/loader.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun --eval 'import(\"./src/config/validator.ts\").then(m => m.validateOlimpusConfig({ meta_agents: {} })); console.log(\"OK\")'",
            "expected": "OK"
          },
          "status": "completed"
        }
      ]
    },
    {
      "id": "phase-2-validator-tests",
      "name": "Validator Tests",
      "type": "implementation",
      "description": "Create comprehensive tests for the validator module",
      "depends_on": [
        "phase-1-validator-core"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-2-1",
          "description": "Create test file with setup helpers and test fixtures",
          "service": "olimpus",
          "files_to_create": [
            "src/config/validator.test.ts"
          ],
          "patterns_from": [
            "src/config/scaffolder.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun test src/config/validator.test.ts",
            "expected": "Tests run without syntax errors"
          },
          "status": "completed"
        },
        {
          "id": "subtask-2-2",
          "description": "Write tests for circular dependency detection",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/validator.test.ts"
          ],
          "patterns_from": [
            "src/config/scaffolder.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun test --test-filter 'circular dependency'",
            "expected": "All circular dependency tests pass"
          },
          "status": "completed"
        },
        {
          "id": "subtask-2-3",
          "description": "Write tests for agent reference validation",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/validator.test.ts"
          ],
          "patterns_from": [
            "src/config/scaffolder.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun test --test-filter 'agent reference'",
            "expected": "All agent reference tests pass"
          },
          "status": "completed"
        },
        {
          "id": "subtask-2-4",
          "description": "Write tests for regex performance warnings",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/validator.test.ts"
          ],
          "patterns_from": [
            "src/config/scaffolder.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun test --test-filter 'regex performance'",
            "expected": "All regex performance tests pass"
          },
          "status": "completed"
        },
        {
          "id": "subtask-2-5",
          "description": "Write tests for valid configurations",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/validator.test.ts"
          ],
          "patterns_from": [
            "src/config/scaffolder.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun test --test-filter 'valid config'",
            "expected": "All valid config tests pass"
          },
          "status": "completed"
        }
      ]
    },
    {
      "id": "phase-3-cli-integration",
      "name": "CLI Integration",
      "type": "implementation",
      "description": "Create CLI command 'olimpus validate' that loads and validates configuration",
      "depends_on": [
        "phase-1-validator-core"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-3-1",
          "description": "Create CLI entry point script for 'olimpus validate' command",
          "service": "olimpus",
          "files_to_create": [
            "bin/olimpus.ts"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "bun run bin/olimpus.ts validate --help",
            "expected": "Help output displayed"
          },
          "status": "pending"
        },
        {
          "id": "subtask-3-2",
          "description": "Implement validate command with file path argument and output formatting",
          "service": "olimpus",
          "files_to_modify": [
            "bin/olimpus.ts"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "bun run bin/olimpus.ts validate olimpus.jsonc",
            "expected": "Validation runs and reports results"
          },
          "status": "pending"
        },
        {
          "id": "subtask-3-3",
          "description": "Make CLI script executable and add to package.json",
          "service": "olimpus",
          "files_to_modify": [
            "package.json",
            "bin/olimpus.ts"
          ],
          "patterns_from": [
            "package.json"
          ],
          "verification": {
            "type": "command",
            "command": "chmod +x bin/olimpus.ts && bun run olimpus validate --help",
            "expected": "Command executes successfully"
          },
          "status": "pending"
        }
      ]
    },
    {
      "id": "phase-4-integration",
      "name": "Integration",
      "type": "integration",
      "description": "Integrate validator with main plugin entry point and verify end-to-end functionality",
      "depends_on": [
        "phase-2-validator-tests",
        "phase-3-cli-integration"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-4-1",
          "description": "Add optional validation to loadOlimpusConfig for early error detection",
          "service": "olimpus",
          "files_to_modify": [
            "src/config/loader.ts"
          ],
          "patterns_from": [
            "src/config/loader.ts"
          ],
          "verification": {
            "type": "command",
            "command": "bun test",
            "expected": "All tests pass including new loader tests"
          },
          "status": "pending"
        },
        {
          "id": "subtask-4-2",
          "description": "End-to-end verification: validate example config with known issues",
          "service": "olimpus",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [
            "example/olimpus.jsonc"
          ],
          "verification": {
            "type": "e2e",
            "steps": [
              "Create test config with intentional circular dependency",
              "Run 'olimpus validate' on test config",
              "Verify circular dependency error is detected and reported",
              "Create test config with invalid agent reference",
              "Run 'olimpus validate' on test config",
              "Verify invalid agent reference error is detected and reported",
              "Create test config with slow regex pattern",
              "Run 'olimpus validate' on test config",
              "Verify regex performance warning is shown",
              "Validate example/olimpus.jsonc and verify it passes"
            ]
          },
          "status": "pending"
        },
        {
          "id": "subtask-4-3",
          "description": "Update documentation with validator usage examples",
          "service": "olimpus",
          "files_to_modify": [
            "README.md"
          ],
          "patterns_from": [
            "README.md"
          ],
          "verification": {
            "type": "manual",
            "instructions": "Review README.md to ensure 'olimpus validate' command is documented with examples"
          },
          "status": "pending"
        }
      ]
    }
  ],
  "summary": {
    "total_phases": 4,
    "total_subtasks": 14,
    "services_involved": [
      "olimpus"
    ],
    "parallelism": {
      "max_parallel_phases": 2,
      "parallel_groups": [
        {
          "phases": [
            "phase-2-validator-tests",
            "phase-3-cli-integration"
          ],
          "reason": "Both depend only on phase-1 and operate in different domains (tests vs CLI)"
        }
      ],
      "recommended_workers": 2,
      "speedup_estimate": "1.5x faster than sequential"
    },
    "startup_command": "cd /Users/alejandro/dev/ONLY-WORKS-ON-OLYMPUS/.auto-claude/worktrees/tasks/003-configuration-validator && source .venv/bin/activate && python auto-claude/run.py --spec 003 --parallel 2"
  },
  "verification_strategy": {
    "risk_level": "medium",
    "skip_validation": false,
    "test_creation_phase": "post_implementation",
    "test_types_required": [
      "unit"
    ],
    "security_scanning_required": false,
    "staging_deployment_required": false,
    "acceptance_criteria": [
      "All existing tests pass",
      "New validator module has comprehensive test coverage",
      "CLI 'olimpus validate' command works correctly",
      "Circular dependencies are detected and reported",
      "Invalid agent references are detected and reported",
      "Slow regex patterns generate warnings"
    ],
    "verification_steps": [
      {
        "name": "Unit Tests",
        "command": "bun test",
        "expected_outcome": "All tests pass",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "Type Check",
        "command": "bun run typecheck",
        "expected_outcome": "No type errors",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "CLI Command Test",
        "command": "bun run bin/olimpus.ts validate example/olimpus.jsonc",
        "expected_outcome": "Validation runs successfully and reports results",
        "type": "manual",
        "required": true,
        "blocking": false
      }
    ],
    "reasoning": "Medium risk - new validator functionality affects config loading behavior. Requires unit tests but no security scanning or staging deployment needed."
  },
  "qa_acceptance": {
    "unit_tests": {
      "required": true,
      "commands": [
        "bun test"
      ],
      "minimum_coverage": 80
    },
    "integration_tests": {
      "required": false,
      "commands": [],
      "services_to_test": []
    },
    "e2e_tests": {
      "required": true,
      "commands": [],
      "flows": [
        "validate-config-with-circular-deps",
        "validate-config-with-invalid-agents",
        "validate-config-with-slow-regex",
        "validate-valid-config"
      ]
    },
    "browser_verification": {
      "required": false,
      "pages": []
    },
    "database_verification": {
      "required": false,
      "checks": []
    }
  },
  "qa_signoff": null,
  "status": "in_progress",
  "planStatus": "in_progress",
  "updated_at": "2026-02-18T20:57:57.833Z"
}